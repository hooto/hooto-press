// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
// Swift mode created by Michael Kaminsky https://github.com/mkaminsky11
(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";function t(e){return/^\s*(.*?)\s*$/.exec(e)[1]}function i(e,t){var n=-1,i=1,s=e.split(r);for(var o=0;o<s.length;o++){for(var u=1;u<=s[o].length;u++)i==t&&(n=o),i++;i++}var a=["",""];return t==0?(a[1]=s[0],a[0]=null):(a[1]=s[n],a[0]=s[n-1]),a}var n=[" ","\\+","\\-","\\(","\\)","\\*","/",":","\\?","\\<","\\>"," ","\\."],r=new RegExp(n.join("|"),"g");e.defineMode("swift",function(){var e=["var","let","class","deinit","enum","extension","func","import","init","let","protocol","static","struct","subscript","typealias","var","as","dynamicType","is","new","super","self","Self","Type","__COLUMN__","__FILE__","__FUNCTION__","__LINE__","break","case","continue","default","do","else","fallthrough","if","in","for","return","switch","where","while","associativity","didSet","get","infix","inout","left","mutating","none","nonmutating","operator","override","postfix","precedence","prefix","right","set","unowned","unowned(safe)","unowned(unsafe)","weak","willSet"],n=["Infinity","NaN","undefined","null","true","false","on","off","yes","no","nil","null","this","super"],s=["String","bool","int","string","double","Double","Int","Float","float","public","private","extension"],o=["0","1","2","3","4","5","6","7","8","9"],u=["+","-","/","*","%","=","|","&","<",">"],a=[";",",",".","(",")","{","}","[","]"],f=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,l=/^[_A-Za-z$][_A-Za-z$0-9]*/,c=/^(@|this\.)[_A-Za-z$][_A-Za-z$0-9]*/,h=/^(\/{3}|\/)/;return{startState:function(){return{prev:!1,string:!1,escape:!1,inner:!1,comment:!1,num_left:0,num_right:0,doubleString:!1,singleString:!1}},token:function(p,d){if(p.eatSpace())return null;var v=p.next();if(d.string)return d.escape?(d.escape=!1,"string"):(v=='"'&&d.doubleString&&!d.singleString||v=="'"&&!d.doubleString&&d.singleString)&&!d.escape?(d.string=!1,d.doubleString=!1,d.singleString=!1,"string"):v=="\\"&&p.peek()=="("?(d.inner=!0,d.string=!1,"keyword"):v=="\\"&&p.peek()!="("?(d.escape=!0,d.string=!0,"string"):"string";if(d.comment)return v=="*"&&p.peek()=="/"?(d.prev="*","comment"):v=="/"&&d.prev=="*"?(d.prev=!1,d.comment=!1,"comment"):"comment";if(v=="/"){if(p.peek()=="/")return p.skipToEnd(),"comment";if(p.peek()=="*")return d.comment=!0,"comment"}if(v=="("&&d.inner)return d.num_left++,null;if(v==")"&&d.inner)return d.num_right++,d.num_left==d.num_right&&(d.inner=!1,d.string=!0),null;var m=i(p.string,p.pos),g=m[1],y=m[0];if(u.indexOf(v+"")>-1)return"operator";if(a.indexOf(v)>-1)return"punctuation";if(typeof g!="undefined"){g=t(g),typeof y!="undefined"&&(y=t(y));if(g.charAt(0)=="#")return null;if(s.indexOf(g)>-1)return"def";if(n.indexOf(g)>-1)return"atom";if(o.indexOf(g)>-1)return"number";if((o.indexOf(g.charAt(0)+"")>-1||u.indexOf(g.charAt(0)+"")>-1)&&o.indexOf(v)>-1)return"number";if(e.indexOf(g)>-1||e.indexOf(g.split(r)[0])>-1)return"keyword";if(e.indexOf(y)>-1)return"def"}if(v=='"'&&!d.doubleString)return d.string=!0,d.doubleString=!0,"string";if(v=="'"&&!d.singleString)return d.string=!0,d.singleString=!0,"string";v=="("&&d.inner&&d.num_left++;if(v==")"&&d.inner)return d.num_right++,d.num_left==d.num_right&&(d.inner=!1,d.string=!0),null;if(p.match(/^-?[0-9\.]/,!1)){if(p.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)||p.match(/^-?\d+\.\d*/)||p.match(/^-?\.\d+/))return p.peek()=="."&&p.backUp(1),"number";if(p.match(/^-?0x[0-9a-f]+/i)||p.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)||p.match(/^-?0(?![\dx])/i))return"number"}if(p.match(h)){if(p.current()!="/"||p.match(/^.*\//,!1))return"string";p.backUp(1)}return p.match(f)?"punctuation":p.match(l)?"variable":p.match(c)?"property":"variable"}}}),e.defineMIME("text/x-swift","swift")});